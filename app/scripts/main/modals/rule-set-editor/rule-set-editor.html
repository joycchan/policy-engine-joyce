<div class="ruleEditor">
  <div class="classifiers">
    <div class="title">Classifiers</div>
    <div class="search">
      <input-search model="search.classifiers.name"></input-search>
    </div>
    <div class="addButton">
      <div class="button">Add Custom Classifier</div>
    </div>
    <div class="hDivider"></div>
    <div class="category">Category</div>
    <div class="category-dropdown">
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
          All
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
          <li role="presentation"><a role="menuitem" tabindex="-1" href="#">All</a></li>
        </ul>
      </div>
    </div>
    <div
      class="listItem"
      ng-repeat="classifier in existingClassifiers() | filter: search.classifiers"
      ng-drag="isInEditModeForAnyRule()"
      ng-drag-data="decorateData(classifier, 'classifier')">
      {{classifier.name}}
    </div>
  </div>


  <div class="editor">
    <div class="title title--editor">Rule Set Editor</div>
    <div class="editor-help">
      Rules define how the network behaves.  Classifiers describe types of network traffic and actions deterimne waht to do with that type of traffic.  You can pair up existing classifiers and actions from the libraries, or you can specify your custom rule.
    </div>
    <div class="rulesListContainer">
      <table class="listView listView--iconsHover rulesList">
        <thead>
          <tr>
            <th></th>
            <th><div>Classifier</div><div class="listView-headerDescription">Classifiers are OR'ed</div></th>
            <th><div>Action</div><div class="listView-headerDescription">Actions are AND'ed</div></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="rule in selectedRuleSet.rules" class="rulesList-row" ng-class="{'is-inEditMode': editModeHash[$index] }">
            <td>
              <div class="listView-number" ng-hide="editModeHash[$index]">{{$index + 1}}</div>
              <div class="editIcon" ng-show="editModeHash[$index]" ng-click="toggleEditRuleSet($index)"><img src="images/icon_edit_16_blue.png"></div>
            </td>
            <td>
              <div class="subRuleContainer" ng-drop="true" ng-drop-success="addClassifier($data, $index)">
                <div class="subRule subRule--classifier listView-innerList" ng-repeat="classifier in rule.classifiers">
                  {{classifier.name}}
                </div>
                <div class="subRule subRule--empty" ng-show="rule.classifiers.length === 0">DRAG IN CLASSIFIERS FROM LEFT</div>
              </div>
            </td>
            <td>
              <div class="subRuleContainer" ng-drop="true" ng-drop-success="addAction($data, $index)">
                <div class="subRule subRule--action listView-innerList" ng-repeat="action in rule.actions">
                  {{action.name}}</div>
                  <div class="subRule--empty" ng-show="rule.actions.length === 0">DRAG IN ACTIONS FROM RIGHT</div>
              </div>
            </td>
            <td>
              <div ng-hide="editModeHash[$index]">
                <list-view-icon ng-click="toggleEditRuleSet($index)" inactive-src="images/icon_edit_16.png" active-src="images/icon_edit_16_blue.png"></list-view-icon>
                <list-view-icon ng-click="deleteRule($index)"inactive-src="images/icon_x_16.png" active-src="images/icon_x_dark_16.png"></list-view-icon>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="addRuleContainer">
      <table class="addRule listView rulesList" ng-class="{'is-disabled': !areAllRulesValid()}">
        <tr>
          <td>
            <div class="listView-number" ng-hide="editModeHash[$index]">{{selectedRuleSet.rules.length + 1}}</div>
          </td>
          <td colspan="2">
            <div class="addRuleTextContainer" ng-click="addRule()">
              <div class="subRule subRule--new">Add new rule</div>
            </div>
          </td>
        </tr>
      </table>
    </div>

    <div class="openClose button-group">
        <div class="button button--secondary" ng-click="cancel()">Cancel</div>
        <div class="button" ng-click="ok()" ng-class="{ 'is-disabled': !areAllRulesValid() }">OK</div>
    </div>
  </div>
  
  <div class="actions">
    <div class="title">Actions</div>
    <div class="search">
      <input-search model="search.actions.name"></input-search>
    </div>
    <div class="addButton">
      <div class="button">Add Custom Action</div>
    </div>
    <div class="hDivider"></div>
    <div class="listItem"
      ng-repeat="action in existingActions() | filter: search.actions"
      ng-drag="isInEditModeForAnyRule()"
      ng-drag-data="decorateData(action, 'action')">
      {{action.name}}
    </div>
  </div>
</div>
